<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Kalkulator Barisan & Deret Strategis</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Flex:opsz,wght@8..144,100..1000&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Google Sans Flex', sans-serif; background-color: #f8f9fa; margin: 0; padding: 20px; color: #202124; display: flex; flex-direction: column; align-items: center; }
        h1 { font-weight: 700; color: #1a73e8; margin-bottom: 30px; letter-spacing: -0.5px; }

        .main-wrapper { display: flex; gap: 24px; width: 100%; max-width: 1150px; min-height: 550px; }
        .panel-left, .panel-right { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 1px 3px rgba(60,64,67,0.3), 0 4px 8px rgba(60,64,67,0.15); flex: 1; }

        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: 500; margin-bottom: 8px; font-size: 14px; color: #5f6368; }
        
        input, select { 
            width: 100%; padding: 14px; border: 1px solid #dadce0; border-radius: 12px; 
            box-sizing: border-box; font-family: inherit; font-size: 15px; transition: all 0.2s ease;
        }
        input:focus { border: 2px solid #1a73e8; outline: none; box-shadow: 0 0 0 3px rgba(26,115,232,0.1); }

        .btn-hitung { 
            width: 100%; padding: 16px; background: #1a73e8; color: white; border: none; 
            border-radius: 12px; font-weight: 600; font-size: 16px; cursor: pointer; 
            transition: 0.2s; margin-top: 10px;
        }
        .btn-hitung:hover { background: #1765cc; transform: translateY(-1px); }

        .display-box { border: 1px solid #dadce0; border-radius: 16px; padding: 20px; background: #ffffff; min-height: 400px; }
        .step-box { background: #f1f3f4; padding: 16px; border-radius: 12px; margin-bottom: 12px; font-size: 14px; line-height: 1.6; border-left: 5px solid #1a73e8; }
        .step-title { font-weight: 700; color: #1a73e8; display: block; margin-bottom: 5px; text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; }

        .barisan-visual { 
            font-family: 'Roboto Mono', monospace; color: #d93025; font-weight: 600; font-size: 15px;
            background: #fce8e6; padding: 12px; border-radius: 10px; display: block; margin-top: 5px; word-break: break-all;
        }
        .highlight { color: #1a73e8; font-weight: bold; }
    </style>
</head>
<body>

    <h1>Kalkulator Barisan & Deret</h1>

    <div class="main-wrapper">
        <div class="panel-left">
            <div class="input-group">
                <label>Jenis Pola & Operasi</label>
                <select id="tipeOperasi">
                    <option value="aritmatika+">Aritmatika (+)</option>
                    <option value="aritmatika-">Aritmatika (-)</option>
                    <option value="geometri*">Geometri (kali ×)</option>
                    <option value="geometri/">Geometri (bagi ÷)</option>
                </select>
            </div>

            <div class="input-group">
                <label>Suku Pertama (a)</label>
                <input type="number" id="inpA" placeholder="Contoh: 10">
            </div>

            <div class="input-group">
                <label id="lblB">Beda / Rasio Nilai</label>
                <input type="number" id="inpB" placeholder="Masukkan angka perubahan">
            </div>

            <div class="input-group">
                <label>Target Suku Ke-n</label>
                <input type="number" id="inpN" value="10" min="1">
            </div>

            <button class="btn-hitung" onclick="kalkulasi()">Analisis Pola & Hitung</button>
        </div>

        <div class="panel-right">
            <label>Laporan Hasil Analisis</label>
            <div id="displayArea" class="display-box">
                <p style="text-align: center; color: #70757a; margin-top: 150px;">
                    Hasil perhitungan akan muncul di sini secara otomatis.
                </p>
            </div>
        </div>
    </div>

    <script>
        function kalkulasi() {
            const tipe = document.getElementById('tipeOperasi').value;
            const a = parseFloat(document.getElementById('inpA').value);
            const b = parseFloat(document.getElementById('inpB').value);
            const n = parseInt(document.getElementById('inpN').value);
            const area = document.getElementById('displayArea');

            if (isNaN(a) || isNaN(b) || isNaN(n)) {
                alert("Mohon lengkapi semua data input!");
                return;
            }

            let barisan = [a];
            let sn = a;
            let deskripsiPola = "";
            let simbol = "";

            // Menentukan simbol dan deskripsi berdasarkan pilihan
            if (tipe === "aritmatika+") { simbol = "+"; deskripsiPola = "Penambahan Tetap (Aritmatika)"; }
            else if (tipe === "aritmatika-") { simbol = "-"; deskripsiPola = "Pengurangan Tetap (Aritmatika)"; }
            else if (tipe === "geometri*") { simbol = "×"; deskripsiPola = "Perkalian Tetap (Geometri)"; }
            else if (tipe === "geometri/") { simbol = "÷"; deskripsiPola = "Pembagian Tetap (Geometri)"; }

            // Proses Hitung Barisan
            for (let i = 1; i < n; i++) {
                let prev = barisan[i - 1];
                let next;

                if (tipe === "aritmatika+") next = prev + b;
                else if (tipe === "aritmatika-") next = prev - b;
                else if (tipe === "geometri*") next = prev * b;
                else if (tipe === "geometri/") next = b !== 0 ? prev / b : 0;

                barisan.push(next);
                sn += next;
            }

            // Visualisasi Barisan (Batasi tampilan jika terlalu panjang)
            let visual = barisan.length > 10 
                ? [...barisan.slice(0, 7), "...", ...barisan.slice(-1)] 
                : barisan;

            area.innerHTML = `
                <div class="step-box">
                    <span class="step-title">Informasi Dasar</span>
                    Suku Pertama (a): <span class="highlight">${a}</span><br>
                    Operasi: <span class="highlight">${deskripsiPola} (${simbol}${b})</span>
                </div>
                <div class="step-box">
                    <span class="step-title">Barisan yang Terbentuk</span>
                    <span class="barisan-visual">${visual.map(v => typeof v === 'number' ? v.toLocaleString('id-ID') : v).join(", ")}</span>
                </div>
                <div class="step-box" style="border-left-color: #d93025;">
                    <span class="step-title" style="color: #d93025;">Hasil Akhir</span>
                    Suku ke-${n} (U<sub>${n}</sub>) = <b class="highlight">${barisan[n-1].toLocaleString('id-ID')}</b><br>
                    Jumlah Total (S<sub>${n}</sub>) = <b class="highlight">${sn.toLocaleString('id-ID')}</b>
                </div>
            `;
        }
    </script>
</body>
</html>
