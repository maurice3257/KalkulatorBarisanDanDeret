<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Kalkulator Barisan & Deret Fleksibel</title>
    <style>
        /* CSS Dasar - Gaya Mahasiswa IT */
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 { color: #1a73e8; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px; }

        /* Container Utama Landscape */
        .main-wrapper {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 1100px;
            min-height: 550px;
        }

        /* Kolom Kiri: Input */
        .panel-input {
            flex: 1;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* Kolom Kanan: Hasil & Grafik */
        .panel-output {
            flex: 1.2;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #444; }
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 14px;
        }

        button {
            width: 100%;
            padding: 15px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover { background-color: #1a73e8; }

        /* Area Hasil di Panel Kanan */
        .display-box {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 15px;
            flex-grow: 1;
            overflow-y: auto;
            background-color: #fafafa;
        }

        .step-box {
            background: #e8f0fe;
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid #4285f4;
            font-size: 14px;
            line-height: 1.5;
        }

        .barisan-visual {
            font-family: 'Courier New', monospace;
            color: #d93025;
            font-weight: bold;
            word-break: break-all;
        }
    </style>
</head>
<body>

    <h1>Kalkulator Barisan & Deret Fleksibel</h1>

    <div class="main-wrapper">
        <div class="panel-input">
            <div class="input-group">
                <label>Pilih Tipe Barisan:</label>
                <select id="mode" onchange="resetTampilan()">
                    <option value="aritmatika">Aritmatika (Tingkat 1)</option>
                    <option value="bertingkat">Aritmatika Bertingkat (Tingkat 2)</option>
                    <option value="geometri">Geometri</option>
                </select>
            </div>

            <div class="input-group">
                <label>Suku Pertama (a):</label>
                <input type="number" id="inpA" placeholder="Kosongkan jika tidak ada">
            </div>

            <div class="input-group">
                <label id="lblB">Beda (b):</label>
                <input type="number" id="inpB" placeholder="Kosongkan jika tidak ada">
            </div>

            <div id="groupC" class="input-group" style="display:none;">
                <label>Beda Tingkat 2 (c):</label>
                <input type="number" id="inpC" placeholder="Hanya untuk bertingkat">
            </div>

            <div class="input-group">
                <label>Suku Ke-n (n):</label>
                <input type="number" id="inpN" placeholder="Contoh: 10">
            </div>

            <div class="input-group">
                <label>Nilai Suku ke-n (Un):</label>
                <input type="number" id="inpUn" placeholder="Kosongkan jika dicari">
            </div>

            <button onclick="hitungLandscape()">Hitung & Tampilkan Hasil</button>
        </div>

        <div class="panel-output">
            <label>Laporan Perhitungan:</label>
            <div id="displayArea" class="display-box">
                <p style="text-align: center; color: #888; margin-top: 50px;">
                    Hasil perhitungan dan cara kerja akan muncul di sini...
                </p>
            </div>
        </div>
    </div>

    <script>
        function resetTampilan() {
            let mode = document.getElementById('mode').value;
            document.getElementById('groupC').style.display = (mode === 'bertingkat') ? 'block' : 'none';
            document.getElementById('lblB').innerText = (mode === 'geometri') ? "Rasio (r):" : "Beda (b):";
        }

        function hitungLandscape() {
            let mode = document.getElementById('mode').value;
            let a = document.getElementById('inpA').value !== "" ? parseFloat(document.getElementById('inpA').value) : null;
            let b = document.getElementById('inpB').value !== "" ? parseFloat(document.getElementById('inpB').value) : null;
            let c = parseFloat(document.getElementById('inpC').value) || 0;
            let n = parseInt(document.getElementById('inpN').value);
            let unInp = document.getElementById('inpUn').value !== "" ? parseFloat(document.getElementById('inpUn').value) : null;

            if (!n) { alert("Masukkan nilai n!"); return; }

            let un, sn = 0, caraUn = "", barisan = [];

            // Logika Aritmatika & Geometri (Sama seperti sebelumnya)
            if (mode === "aritmatika") {
                if (a === null && unInp !== null) a = unInp - (n - 1) * b;
                if (b === null && unInp !== null) b = (unInp - a) / (n - 1);
                un = a + (n - 1) * b;
                sn = (n / 2) * (a + un);
                caraUn = `Un = a + (n-1)b = ${a} + (${n}-1)${b} = ${un}`;
            } else if (mode === "geometri") {
                if (a === null) a = unInp / Math.pow(b, n - 1);
                un = a * Math.pow(b, n - 1);
                sn = (b === 1) ? (a * n) : (a * (Math.pow(b, n) - 1) / (b - 1));
                caraUn = `Un = a * r^(n-1) = ${a} * ${b}^(${n}-1) = ${un}`;
            } else {
                un = a + (n-1)*b + 0.5*(n-1)*(n-2)*c;
                caraUn = `Un = a + (n-1)b + ((n-1)(n-2)c)/2 = ${un}`;
                // Sn bertingkat lebih kompleks, kita hitung via loop
            }

            // Generate Barisan (Limit 10)
            for(let i=1; i<=n; i++) {
                let val;
                if(mode==="aritmatika") val = a + (i-1)*b;
                else if(mode==="geometri") val = a * Math.pow(b, i-1);
                else val = a + (i-1)*b + 0.5*(i-1)*(i-2)*c;
                
                if(mode === "bertingkat") sn += val; 

                if(i <= 9 || i === n) barisan.push(val);
                if(i === 9 && n > 10) barisan.push("...");
            }

            // Update Panel Kanan
            let area = document.getElementById('displayArea');
            area.innerHTML = `
                <div class="step-box"><strong>DIKETAHUI:</strong><br>a = ${a}, b/r = ${b}, n = ${n} ${mode==='bertingkat'?', c = '+c:''}</div>
                <div class="step-box"><strong>BARISAN:</strong><br><span class="barisan-visual">${barisan.join(", ")}</span></div>
                <div class="step-box"><strong>CARA UN:</strong><br>${caraUn}</div>
                <div class="step-box"><strong>HASIL AKHIR:</strong><br>Un = ${un.toFixed(2)}<br>Sn = ${sn.toFixed(2)}</div>
            `;
        }
    </script>
</body>
</html>
